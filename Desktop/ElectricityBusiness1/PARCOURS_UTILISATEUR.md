# üöÄ Parcours Utilisateur - Electricity Business

## üìã Guide complet pour tester toutes les fonctionnalit√©s

---

## ‚úÖ Pr√©requis

Assurez-vous que tous les services sont d√©marr√©s :
```bash
docker-compose ps
```

Vous devriez voir :
- ‚úÖ `db` (PostgreSQL) sur port 5433
- ‚úÖ `mailhog` sur ports 1026, 8026
- ‚úÖ `backend-app` (API) sur port 8080
- ‚úÖ `signup-app` (Frontend) sur port 8081

---

## üéØ PARCOURS 1 : Cr√©ation de compte et connexion

### √âtape 1.1 : Acc√©der √† l'application
1. Ouvrez votre navigateur
2. Allez sur : **http://localhost:8081**
3. ‚úÖ **V√©rification** : Vous devez voir la page d'accueil avec les options "Se connecter" et "S'inscrire"

### √âtape 1.2 : Cr√©er un nouveau compte
1. Cliquez sur **"S'inscrire"** ou allez sur : **http://localhost:8081/register.jsp**
2. Remplissez le formulaire :
   - **Pr√©nom** : Alice
   - **Nom** : Dubois
   - **Email** : alice.dubois@example.com
   - **T√©l√©phone** : 0612345678
   - **Date de naissance** : 01/01/1995
   - **Adresse** : 123 Rue de la Paix
   - **Code postal** : 75001
   - **Ville** : Paris
   - **Mot de passe** : Password123!
   - **Confirmer** : Password123!

3. Cliquez sur **"S'inscrire"**
4. ‚úÖ **V√©rification** : Vous √™tes redirig√© vers la page de v√©rification

### √âtape 1.3 : V√©rifier l'email (simulation)
1. Ouvrez MailHog : **http://localhost:8026**
2. ‚úÖ **V√©rification** : Vous devez voir un email de v√©rification
3. Cliquez sur le lien de v√©rification dans l'email
4. ‚úÖ **V√©rification** : Votre compte est activ√©

### √âtape 1.4 : Se connecter
1. Retournez sur : **http://localhost:8081/login.jsp**
2. Connectez-vous avec :
   - **Email** : alice.dubois@example.com
   - **Mot de passe** : Password123!
3. Cliquez sur **"Se connecter"**
4. ‚úÖ **V√©rification** : Vous √™tes redirig√© vers le dashboard

---

## üó∫Ô∏è PARCOURS 2 : Gestion des lieux

### √âtape 2.1 : Voir la liste des lieux existants
1. Dans le menu, cliquez sur **"Lieux"** ou allez sur : **http://localhost:8081/locations.jsp**
2. ‚úÖ **V√©rification** : Vous voyez la liste des lieux avec :
   - Station Centre Ville - Place de la R√©publique, 75001 Paris
   - Station A√©roport CDG - Terminal 2F, 95700 Roissy-en-France

### √âtape 2.2 : Cr√©er un nouveau lieu
1. Cliquez sur **"+ Ajouter un lieu"** ou allez sur : **http://localhost:8081/add-location.jsp**
2. Remplissez le formulaire :
   - **Nom du lieu** : Station Gare du Nord
   - **Adresse** : Place Napol√©on III, 75010 Paris
   - **Latitude** : 48.8809
   - **Longitude** : 2.3553
   - **Description** : Station de recharge √† proximit√© de la Gare du Nord

3. Cliquez sur **"Ajouter le lieu"**
4. ‚úÖ **V√©rification** : 
   - Message de succ√®s affich√©
   - Redirection vers la page des lieux
   - Votre nouveau lieu appara√Æt dans la liste

### √âtape 2.3 : Modifier un lieu
1. Sur la page des lieux, cliquez sur **"‚úèÔ∏è Modifier"** pour "Station Gare du Nord"
2. Modifiez la description : "Station de recharge rapide 24h/24 pr√®s de la Gare du Nord"
3. Cliquez sur **"Mettre √† jour"**
4. ‚úÖ **V√©rification** : La description est mise √† jour

### √âtape 2.4 : Rechercher un lieu
1. Dans la barre de recherche, tapez : "Gare"
2. ‚úÖ **V√©rification** : Seul "Station Gare du Nord" s'affiche

---

## üîå PARCOURS 3 : Gestion des bornes de recharge

### √âtape 3.1 : Voir les bornes existantes
1. Cliquez sur **"Bornes"** ou allez sur : **http://localhost:8081/stations.jsp**
2. ‚úÖ **V√©rification** : Vous voyez la liste des bornes avec leurs d√©tails (nom, lieu, tarif, type de prise)

### √âtape 3.2 : Ajouter une nouvelle borne
1. Cliquez sur **"+ Ajouter une borne"** ou allez sur : **http://localhost:8081/add-station.jsp**
2. Remplissez le formulaire :
   - **Nom de la borne** : Borne Rapide Nord 1
   - **S√©lectionner un lieu** : Station Gare du Nord (que vous venez de cr√©er)
   - **Puissance (kW)** : 50
   - **Type de prise** : CCS_COMBO
   - **Tarif horaire (‚Ç¨)** : 0.35
   - **Description** : Borne de recharge rapide CCS Combo 50kW

3. Cliquez sur **"Ajouter la borne"**
4. ‚úÖ **V√©rification** :
   - Message de succ√®s
   - La borne appara√Æt dans la liste des bornes
   - Le lieu "Station Gare du Nord" est bien affich√©

### √âtape 3.3 : Ajouter plusieurs bornes au m√™me lieu
1. Ajoutez une deuxi√®me borne :
   - **Nom** : Borne Rapide Nord 2
   - **Lieu** : Station Gare du Nord
   - **Puissance** : 50
   - **Type de prise** : TYPE2S
   - **Tarif** : 0.30

2. ‚úÖ **V√©rification** : Vous avez maintenant 2 bornes au m√™me lieu

### √âtape 3.4 : Modifier une borne
1. Cliquez sur **"‚úèÔ∏è Modifier"** pour "Borne Rapide Nord 1"
2. Changez le tarif √† : 0.40
3. Cliquez sur **"Mettre √† jour"**
4. ‚úÖ **V√©rification** : Le tarif est mis √† jour

### √âtape 3.5 : Filtrer les bornes
1. Utilisez le filtre "Type de prise" : CCS_COMBO
2. ‚úÖ **V√©rification** : Seules les bornes CCS Combo s'affichent

---

## üó∫Ô∏è PARCOURS 4 : Visualisation sur la carte

### √âtape 4.1 : Acc√©der √† la carte
1. Cliquez sur **"Carte"** ou allez sur : **http://localhost:8081/map.jsp**
2. ‚úÖ **V√©rification** : 
   - La carte s'affiche avec tous les lieux
   - Des marqueurs sont visibles pour chaque borne

### √âtape 4.2 : Voir les d√©tails d'une borne
1. Cliquez sur un marqueur sur la carte
2. ‚úÖ **V√©rification** : Une popup s'ouvre avec :
   - Nom de la borne
   - Lieu
   - Adresse
   - Tarif horaire
   - Type de prise
   - Bouton "R√©server"

### √âtape 4.3 : R√©server depuis la carte
1. Dans la popup, cliquez sur **"R√©server"**
2. ‚úÖ **V√©rification** : Vous √™tes redirig√© vers la page de r√©servation avec la borne pr√©-s√©lectionn√©e

---

## üìÖ PARCOURS 5 : Cr√©er et g√©rer des r√©servations

### √âtape 5.1 : Cr√©er une r√©servation
1. Allez sur : **http://localhost:8081/add-reservation.jsp**
2. Remplissez le formulaire :
   - **Borne** : Borne Rapide Nord 1
   - **Date de d√©but** : Aujourd'hui + 1 jour √† 10:00
   - **Date de fin** : Aujourd'hui + 1 jour √† 12:00
   - **V√©hicule** : Tesla Model 3
   - **Commentaires** : Recharge pour d√©part en week-end

3. Cliquez sur **"Cr√©er la r√©servation"**
4. ‚úÖ **V√©rification** :
   - Message de succ√®s
   - Montant total calcul√© (2 heures √ó tarif)
   - Redirection vers la liste des r√©servations

### √âtape 5.2 : Voir mes r√©servations
1. Allez sur : **http://localhost:8081/reservations.jsp**
2. ‚úÖ **V√©rification** : Vous voyez votre r√©servation avec :
   - Num√©ro de r√©servation
   - Borne et lieu
   - Dates et heures
   - Statut : PENDING (En attente)
   - Montant total

### √âtape 5.3 : Filtrer les r√©servations
1. Utilisez le filtre "Statut" : PENDING
2. ‚úÖ **V√©rification** : Seules les r√©servations en attente s'affichent

3. Utilisez le filtre par date : Aujourd'hui
4. ‚úÖ **V√©rification** : Seules les r√©servations d'aujourd'hui s'affichent

### √âtape 5.4 : Confirmer une r√©servation
1. Cliquez sur **"‚úì Confirmer"** pour votre r√©servation
2. ‚úÖ **V√©rification** :
   - Le statut passe √† CONFIRMED
   - Le badge devient vert
   - Les actions disponibles changent

### √âtape 5.5 : Cr√©er une deuxi√®me r√©servation (pour test)
1. Cr√©ez une nouvelle r√©servation :
   - **Borne** : Borne Rapide Nord 2
   - **Date de d√©but** : Aujourd'hui + 2 jours √† 14:00
   - **Date de fin** : Aujourd'hui + 2 jours √† 16:00

### √âtape 5.6 : Annuler une r√©servation
1. Pour la deuxi√®me r√©servation, cliquez sur **"‚úó Annuler"**
2. Confirmez l'annulation
3. ‚úÖ **V√©rification** :
   - Le statut passe √† CANCELLED
   - Le badge devient rouge
   - Plus d'actions disponibles

### √âtape 5.7 : Compl√©ter une r√©servation
1. Pour la premi√®re r√©servation (CONFIRMED), cliquez sur **"‚úì Terminer"**
2. ‚úÖ **V√©rification** :
   - Le statut passe √† COMPLETED
   - Un bouton "üìÑ Re√ßu" appara√Æt

### √âtape 5.8 : T√©l√©charger le re√ßu
1. Cliquez sur **"üìÑ Re√ßu"**
2. ‚úÖ **V√©rification** : Un fichier PDF se t√©l√©charge avec :
   - Informations de la r√©servation
   - D√©tails de la borne
   - Montant pay√©

---

## üìä PARCOURS 6 : Tableau de bord

### √âtape 6.1 : Voir le dashboard
1. Allez sur : **http://localhost:8081/dashboard.jsp**
2. ‚úÖ **V√©rification** : Vous voyez :
   - Statistiques g√©n√©rales (nombre de bornes, lieux, r√©servations)
   - Graphiques de l'activit√©
   - R√©servations r√©centes
   - Vos informations de profil

### √âtape 6.2 : Navigation rapide
1. Cliquez sur les liens rapides du dashboard
2. ‚úÖ **V√©rification** : Navigation fluide vers les diff√©rentes sections

---

## üîç PARCOURS 7 : Tests de validation

### √âtape 7.1 : Validation des formulaires
1. Essayez de cr√©er une borne sans s√©lectionner de lieu
2. ‚úÖ **V√©rification** : Message d'erreur affich√©

3. Essayez de cr√©er une r√©servation avec une date de fin avant la date de d√©but
4. ‚úÖ **V√©rification** : Message d'erreur affich√©

### √âtape 7.2 : Test de recherche
1. Sur la page des bornes, recherchez "Rapide"
2. ‚úÖ **V√©rification** : Seules les bornes avec "Rapide" dans le nom s'affichent

3. Effacez la recherche
4. ‚úÖ **V√©rification** : Toutes les bornes r√©apparaissent

### √âtape 7.3 : Test de pagination
1. Si vous avez plus de 10 √©l√©ments, v√©rifiez la pagination
2. ‚úÖ **V√©rification** : Navigation entre les pages fonctionne

### √âtape 7.4 : Test de suppression
1. Cr√©ez un lieu de test : "Lieu √† supprimer"
2. Cliquez sur **"üóëÔ∏è Supprimer"**
3. Confirmez la suppression
4. ‚úÖ **V√©rification** : Le lieu dispara√Æt de la liste

---

## üß™ PARCOURS 8 : Tests API (optionnel pour d√©veloppeurs)

### √âtape 8.1 : Acc√©der √† Swagger
1. Ouvrez : **http://localhost:8080/swagger-ui.html**
2. ‚úÖ **V√©rification** : Documentation API compl√®te visible

### √âtape 8.2 : Tester un endpoint
1. Ouvrez l'endpoint `GET /api/stations`
2. Cliquez sur "Try it out"
3. Cliquez sur "Execute"
4. ‚úÖ **V√©rification** : Liste des bornes retourn√©e en JSON

### √âtape 8.3 : Tester l'authentification
1. Utilisez l'endpoint `POST /api/auth/login`
2. Body :
   ```json
   {
     "email": "alice.dubois@example.com",
     "password": "Password123!"
   }
   ```
3. ‚úÖ **V√©rification** : Token JWT retourn√©

---

## üìß PARCOURS 9 : V√©rification des emails

### √âtape 9.1 : Consulter MailHog
1. Ouvrez : **http://localhost:8026**
2. ‚úÖ **V√©rification** : Tous les emails envoy√©s sont visibles :
   - Emails de v√©rification de compte
   - Confirmations de r√©servation
   - Notifications d'annulation

---

## ‚úÖ Checklist compl√®te des fonctionnalit√©s

### Authentification
- ‚úÖ Inscription d'un nouvel utilisateur
- ‚úÖ V√©rification email
- ‚úÖ Connexion
- ‚úÖ D√©connexion

### Gestion des lieux
- ‚úÖ Afficher la liste des lieux
- ‚úÖ Cr√©er un nouveau lieu
- ‚úÖ Modifier un lieu existant
- ‚úÖ Supprimer un lieu
- ‚úÖ Rechercher un lieu

### Gestion des bornes
- ‚úÖ Afficher la liste des bornes
- ‚úÖ Cr√©er une nouvelle borne
- ‚úÖ Modifier une borne existante
- ‚úÖ Supprimer une borne
- ‚úÖ Filtrer par type de prise
- ‚úÖ Associer une borne √† un lieu

### Carte interactive
- ‚úÖ Afficher tous les lieux sur une carte
- ‚úÖ Voir les d√©tails d'une borne via popup
- ‚úÖ R√©server depuis la carte

### R√©servations
- ‚úÖ Cr√©er une r√©servation
- ‚úÖ Voir mes r√©servations
- ‚úÖ Confirmer une r√©servation
- ‚úÖ Annuler une r√©servation
- ‚úÖ Compl√©ter une r√©servation
- ‚úÖ T√©l√©charger un re√ßu PDF
- ‚úÖ Filtrer par statut
- ‚úÖ Filtrer par date

### Dashboard
- ‚úÖ Voir les statistiques
- ‚úÖ Voir les r√©servations r√©centes
- ‚úÖ Navigation rapide

### API Backend
- ‚úÖ Documentation Swagger
- ‚úÖ Authentification JWT
- ‚úÖ Endpoints REST fonctionnels
- ‚úÖ Validation des donn√©es
- ‚úÖ Gestion des erreurs

---

## üêõ Probl√®mes potentiels et solutions

### Probl√®me : "Failed to fetch" sur la carte
**Solution** : V√©rifiez que le backend est bien d√©marr√© sur le port 8080

### Probl√®me : Pas de lieux dans le dropdown
**Solution** : 
1. Cr√©ez d'abord un lieu
2. Actualisez la page d'ajout de borne
3. Le dropdown devrait maintenant afficher les lieux

### Probl√®me : Les marqueurs n'apparaissent pas sur la carte
**Solution** : 
1. V√©rifiez que les bornes ont bien des coordonn√©es (latitude/longitude)
2. V√©rifiez la console du navigateur (F12) pour les erreurs

### Probl√®me : Docker ne d√©marre pas
**Solution** :
```bash
docker-compose down
docker-compose up -d
```

---

## üéâ R√©sultat attendu

√Ä la fin de ce parcours, vous devriez avoir :
- ‚úÖ 1 compte utilisateur cr√©√© et v√©rifi√©
- ‚úÖ 3 lieux (2 existants + 1 cr√©√©)
- ‚úÖ 2+ bornes de recharge
- ‚úÖ 2 r√©servations (1 compl√©t√©e, 1 annul√©e)
- ‚úÖ Toutes les fonctionnalit√©s test√©es et valid√©es

---

## üìù Notes importantes

1. **Les donn√©es de test** sont persist√©es dans PostgreSQL
2. **MailHog** capture tous les emails (pas d'envoi r√©el)
3. **Les coordonn√©es GPS** doivent √™tre valides pour l'affichage sur la carte
4. **Le port 8080** est pour l'API, **8081** pour le frontend
5. **Swagger UI** est accessible pour tester directement l'API

---

## üöÄ Pour aller plus loin

1. Testez les **validations de formulaires**
2. Cr√©ez **plusieurs utilisateurs** et testez les permissions
3. Testez les **performances** avec beaucoup de donn√©es
4. V√©rifiez le **responsive design** sur mobile
5. Testez les **cas limites** (dates invalides, r√©servations simultan√©es, etc.)

---

**Bon test ! üéâ**


